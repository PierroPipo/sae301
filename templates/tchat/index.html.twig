{% extends 'base.html.twig' %}

{% block title %}Tchat{% endblock %}

{% block body %}
<link rel="stylesheet" href="{{ asset('asset/tchat.css') }}" />
<body>
<nav>

    <a href="{{path('app_accueil')}}" class="case">
        <img src="{{ asset('asset/img/accueil.svg') }}" alt="accueil-icon">
        <h2>Accueil</h2>
    </a>

    <a href="{{path('app_calendrier')}}" class="case1">
        <img src="{{ asset('asset/img/calendrier.png') }}" alt="calendrier-icon">
        <h2>Calendrier</h2>
    </a>

    <a href="{{path('app_tchat')}}" class="case">
        <img src="{{ asset('asset/img/tchat.svg') }}" alt="Tchat-icon">
        <h2>Tchat</h2>
    </a>

    <a href="{{path('app_notification')}}" class="case1">
        <img src="{{ asset('asset/img/notification.png') }}" alt="notif-icon">
        <h2>Notification</h2>
    </a>

    <a href="{{path('app_profil')}}" class="case">
        <img src="{{ asset('asset/img/profil.png') }}" alt="profil-icon">
        <h2>Profil</h2>
    </a>

</nav>

<section id="banner">

    <img id="banner__banner" src="{{ asset('asset/img/banner3.png') }}" alt="banner">
    <img id="banner__logo" src="{{ asset('asset/img/logo.png') }}" alt="logo">
    <img id="banner__notif" src="{{ asset('asset/img/notification.png') }}" alt="notif">
    <img id="banner__profil" src="{{ asset('asset/img/profil.png') }}" alt="profil">

</section>

<div class="container">
    <!-- Zone de conversation avec d'autres personnes -->
    <div class="conversation-zone">
        <h2>Conversations</h2>
        <ul class="conversation-list">
            <li class="conversation-item">Conversation 1</li>
            <li class="conversation-item">Conversation 2</li>
            <li class="conversation-item">Conversation 3</li>
            <li class="conversation-item">Conversation 4</li>
            <li class="conversation-item">Conversation 5</li>
            <li class="conversation-item">Conversation 6</li>
            <!-- Vous pouvez remplir cette liste avec les différentes conversations -->
        </ul>
    </div>

    <!-- Votre chatbox actuelle -->
    <div class="chatbox">
        <!-- Structure de la zone de chat -->
        <div class="messages">
            <!-- Structure des messages -->
        </div>
        <form id="message-form">
            <input type="text" id="message-input" placeholder="Ecrire un message..." />
            <button type="submit">Envoyer</button>
        </form>
    </div>
</div>

<footer>
    <div class="ref">
        <h2>Contact :</h2>
        <h3>nemp@gmail.com</h3>
    </div>
    <div class="ref">
        <h2> Réseaux Sociaux</h2>
        <div class="ref__p1">
            <img class="ref__image " src="{{ asset('asset/img/instagram.png') }}" alt="Instagram">
            <h3>capitaine_nemo</h3>
        </div>
        <div class="ref__p2">
            <img class="ref__image " src="./SAE301/Cursed1.png">
            <h3>PierroPipo</h3>
        </div>
    </div>
</footer>
<script>
document.addEventListener("DOMContentLoaded", function() {
    const messageForm = document.getElementById('message-form');
    const messageInput = document.getElementById('message-input');
    const messagesDiv = document.querySelector('.messages');

    messageForm.addEventListener('submit', function(event) {
        event.preventDefault();
        const messageText = messageInput.value.trim();
        if (messageText !== '') {
            const message = document.createElement('div');
            message.classList.add('message');
            message.innerText = messageText;
            messagesDiv.appendChild(message);
            messageInput.value = '';
            // Scroll automatique vers le bas pour voir le dernier message
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }
    });
});

document.addEventListener("DOMContentLoaded", function() {
    const messageForm = document.getElementById('message-form');
    const messageInput = document.getElementById('message-input');
    const chatbox = document.getElementById('chatbox'); // La zone de chat

    const conversationList = document.querySelectorAll('.conversation-item');

    conversationList.forEach(function(conversation) {
        conversation.addEventListener('click', function(event) {
            // Remplace le contenu de la zone de chat par une nouvelle conversation vide
            chatbox.innerHTML = `
                <div class="messages">
                    <!-- Structure des messages -->
                </div>
                <form id="message-form">
                    <input type="text" id="message-input" placeholder="Ecrire un message..." />
                    <button type="submit">Envoyer</button>
                </form>
            `;
        });
    });

    messageForm.addEventListener('submit', function(event) {
        event.preventDefault();
        const messageText = messageInput.value.trim();
        if (messageText !== '') {
            const message = document.createElement('div');
            message.classList.add('message');
            message.innerText = messageText;

            const messagesDiv = document.querySelector('.messages');
            messagesDiv.appendChild(message);

            messageInput.value = '';

            // Scroll automatique vers le bas pour voir le dernier message
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }
    });
});

</script>

</body>
{% endblock %}
